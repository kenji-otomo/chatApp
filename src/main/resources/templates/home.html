<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="UTF-8">
	<title>home</title>
	<link href="/webjars/bootstrap/css/bootstrap.min.css" rel="stylesheet">
	<script src="/webjars/jquery/jquery.min.js"></script>
    <script src="/webjars/sockjs-client/sockjs.min.js"></script>
    <script src="/webjars/stomp-websocket/stomp.min.js"></script>
	<script src="/js/chat.js"></script>
</head>
<body>
	<div class="container">
	<header class="container-fluid row justify-content-between m-4">
		<div class="col-auto">
			<a th:href="@{/home/room/}+${homeId}">ChatApp</a>
		</div>
		<div class="col-auto">現在のRoomID：
		<span th:text="${roomId}" id="roomIdNow"></span>
		</div>
		<div class="col text-right" th:if="${session.user.name}" th:text="${session.user.name}" th:data-value="${session.user.userId}" id="userName">Name</div>
		<div class="col-auto">
			<a th:href="@{/home/logout}">Logout</a>
			</div>
	</header>
		<div class="row no-gutters" style="height: 35rem;">
	
		<div id="left-content" class="col-lg-2">
			<div>
			<a th:href="@{/home/room/}+${homeId}">全体ルーム</a>
			</div><br>
			<div>Room ID</div>
			<form th:action="@{/home/enter}" method="post" id="enterForm">
				<input type="text" name="roomId" id="nextRoomId"><br>
				<button type="submit" id="enterRoom">入室</button>
			</form>
		</div>

		<div id="main-content" class="h-100 col border" tabindex = "0" style="overflow-y:scroll;">
			<table id="conversation" class="table table-striped table-bordered">
				<tbody id="greetings">
					<tr th:each="chat : ${chatList}">
						<td>
							<span th:text="${chat.userName}"></span> : <span th:text="${chat.content}"></span>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>
	<br>
	<div class="row justify-content-end g-2">
		<div class="col-4">
		<form action="" id="sendChat">
			<input type="hidden" id="name" th:value="${session.user.name}">
			<label for="message">Message</label>
			<input type="text" id="message">
			<br>
			<button type="submit" id="send">Send</button>
			</form>
		</div>			
	</div>
	<footer></footer>
	</div>
</body>
</html>